---
title: تكوين عملية إنشاء الفواتير تلقائيًا
description: يوفر هذا المقال معلومات حول كيفية تكوين النظام لإنشاء الفواتير بشكل تلقائي.
author: rumant
ms.date: 10/13/2020
ms.topic: article
ms.reviewer: johnmichalak
ms.author: rumant
ms.openlocfilehash: 273e00e7841c8a34e249e54a7d868034bc34a1f7
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8920596"
---
# <a name="configure-automatic-invoice-creation"></a>تكوين عملية إنشاء الفواتير تلقائيًا

_**ينطبق على:** Project Operations للسيناريوهات المستندة إلى موارد/منتجات غير مخزنة‬_


أكمل الخطوات التالية لتكوين تشغيل فاتورة تلقائية في Dynamics 365 Project Operations.

1. انتقل إلى **الإعدادات** > **الوظائف الدفعية**.
2. قم بإنشاء وظيفة دفعية، وقم بتسميتها **إنشاء فواتير عمليات المشروع**. يجب أن يتضمن اسم الوظيفة الدُفعية الكلمات "إنشاء الفواتير."
3. في حقل **نوع الوظيفة**، حدد **بلا**. افتراضيًا، يتم تعيين  خيارات **التكرار اليومي** و **نشط** إلى **نعم**.
4. حدد **تشغيل سير العمل**. في مربع حوار **البحث عن سجل**، ستري ثلاث مهام لسير العمل:

    - ProcessRunCaller
    - ProcessRunner
    - UpdateRoleUtilization

5. حدد **ProcessRunCaller**، ثم حدد **إضافة**.
6. في مربع الحوار التالي، حدد **موافق**. يكون سير عمل **السكون** متبوعًا بسير عمل **العملية**.

  > [!NOTE]
  > يمكنك أيضاً تحديد **ProcessRunner** في الخطوة 5. بعد ذلك، عندما تحدد **موافق**، يكون سير عمل **العملية** متبوعًا بسير عمل **السكون**.

يؤدي سير عمل **ProcessRunCaller** و **ProcessRunner** إلى إنشاء الفواتير. **ProcessRunCaller** يستدعي **ProcessRunner**. **ProcessRunner** هو سير العمل الذي ينشئ الفواتير فعليًا. ويمر بكافة بنود العقد التي يجب إنشاء الفواتير لها، ويقوم بإنشاء الفواتير لهذه البنود. لتحديد شروط التعاقد التي يجب إنشاء الفواتير لها، فإن الوظيفة تبحث عن تواريخ تشغيل الفاتورة لشروط التعاقد. إذا كانت بنود العقد التي تنتمي لأحد العقود لها نفس تاريخ تشغيل الفاتورة، سيتم تجميع الحركات في فاتورة واحدة بها بندين للفاتورة. إذا لم تكن هناك حركات لإنشاء فواتير لها، تتخطى الوظيفة إنشاء الفاتورة.

بعد انتهاء تشغيل **ProcessRunner**، فإنه يستدعي **ProcessRunCaller**، الذي يوفر وقت النهاية، وويتم إغلاقه. بعد ذلك يبدأ **ProcessRunCaller** المؤقت الذي يعمل على مدار 24 ساعة من وقت النهاية المحدد. وفي نهاية المؤقت، يتم إغلاق **ProcessRunCaller**.

تعد وظيفة معالجة الدفعة لإنشاء الفواتير وظيفة متكررة. إذا تم تشغيل هذه المعالجة الدفعية عده مرات، سيتم إنشاء مثيلات متعددة للوظيفة وتتسبب في حدوث أخطاء. بالتالي، يجب عليك بدء عملية المعالجة الدفعية مرة واحدة فقط، وينبغي إعادة تشغيلها في حالة توقفها عن العمل فقط.

> [!NOTE]
> لا يتم تشغيل الفوترة الدفعية إلا لبنود عقد المشروع التي تم تكوينها بواسطة جداول الفواتير. يجب أن يحتوي بند العقد مع طريقة فوترة بسعر ثابت على مراحل مكوّنة. سيحتاج بند عقد المشروع مع طريقة فوترة الوقت والمواد إلى إعداد جدول فاتورة يستند إلى التاريخ. ينطبق الأمر نفسه على بند العقد المستند إلى المشروع.     


[!INCLUDE[footer-include](../includes/footer-banner.md)]