---
title: الفواتير الأولية للمشروع
description: يوفر هذا الموضوع معلومات حول الفواتير الأولية للمشروع في Project Operations.
author: rumant
ms.date: 04/06/2021
ms.topic: article
ms.prod: ''
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 3d02728ce682781eb8816e0c2239cf62f88adfa8c5d2a0aab280be053c2a5ae6
ms.sourcegitcommit: 7f8d1e7a16af769adb43d1877c28fdce53975db8
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 08/06/2021
ms.locfileid: "6992910"
---
# <a name="proforma-project-pnvoices"></a>الفواتير الأولية للمشروع

_**ينطبق على:** النشر الخفيف – التعامل مع الفواتير الأولية_

تمنح الفوترة الأولية للمشروع مدراء المشروع المستوى الثاني من الموافقة قبل قيامهم بإنشاء الفواتير للعملاء. يتم استكمال المستوى الأول من الموافقة عند الموافقة على إدخالات الوقت والمصروفات والمواد التي يرسلها أعضاء فريق المشروع.

لم يتم تصميم النشر الخفيف لتطبيق Dynamics 365 Project Operations لإنشاء فواتير موجهة للعملاء. توضح القائمة التالية سبب عدم إنشاء الفواتير:

- لا يحتوي على معلومات الضريبة.
- لا يمكنه تحويل عملات أخرى إلى عملة الفواتير.
- لا يمكنه تنسيق الفواتير للطباعة بشكل صحيح.

بدلاً من ذلك، يمكنك استخدام نظام مالي أو محاسبي لإنشاء فواتير موجهة للعميل تستخدم المعلومات في اقتراحات الفواتير المُنشأة.

## <a name="creating-project-invoices"></a>إنشاء فواتير المشروع

يمكن إنشاء فواتير المشروع بمعدل واحدة في المرة أو بشكل مجمع. ويمكنك إنشاؤها يدويا، أو يمكن تكوينها بحيث يتم إنشاؤها في عمليات التشغيل التلقائي.

### <a name="manually-create-project-invoices"></a>إنشاء فواتير المشروع يدويًا 

من صفحة قائمة **عقود المشروع**، يمكنك إنشاء فواتير المشروع بشكل منفصل لكل عقد مشروع، أو يمكنك إنشاء فواتير بشكل مجمع لعقود المشروعات المتعددة.

   - لإنشاء فاتورة لعقد مشروع معين، في صفحة قائمة **عقود المشروع**، افتح عقد مشروع، ثم حدد **إنشاء فاتورة**.

   يتم إنشاء فاتورة لكافة الحركات الخاصة بعقد المشروع المحدد والتي تكون حالتها **جاهز للفوترة**. تتضمن هذه الحركات الوقت والمصاريف والمواد والمراحل الرئيسية وشروط التعاقد القائمة على المنتج وأسطر دفتر يومية المبيعات الأخرى غير المفوترة التي ربما تم تأكيدها.

لإنشاء الفواتير بشكل مجمع:

1. في صفحة قائمة **عقود المشروع**، حدد واحدًا أو أكثر من عقود المشروعات التي لإنشاء فاتورة لها، ثم حدد **إنشاء فواتير مشروع**.
2. تخبرك رسالة تحذير بأنه قد يكون هناك تأخير قبل إنشاء الفواتير. يتم أيضًا عرض العملية. حدد **موافق** لإغلاق مربع الرسالة.

   يتم إنشاء فاتورة لكافة الحركات الخاصة بشرط التعاقد الذي يكون حالته **جاهز للفوترة**. تتضمن هذه الحركات الوقت والمصاريف والمواد والمراحل الرئيسية وشروط التعاقد القائمة على المنتج وأسطر دفتر يومية المبيعات الأخرى غير المفوترة التي ربما تم تأكيدها.

3. استعرض الفواتير التي تم إنشاؤها من خلال الانتقال إلى **المبيعات** \> **الفوترة** \> **الفواتير**. ستظهر لك فاتورة واحده لكل عقد مشروع.

### <a name="set-up-automated-creation-of-project-invoices"></a>إعداد الإنشاء التلقائي لفواتير المشروع 

اتبع هذه الخطوات لتكوين التشغيل التلقائي للفاتورة.

1. الانتقال إلى **إعدادات** \> **الوظائف الدفعية**.
2. قم بإنشاء وظيفة دفعية، وقم بتسميتها **إنشاء فواتير عمليات المشروع**. يجب أن يتضمن اسم الوظيفة الدفعية مصطلح "إنشاء الفواتير."
3. في حقل **نوع الوظيفة**، حدد **بلا**. افتراضيًا، يتم تعيين  خيارات **التكرار اليومي** و **نشط** إلى **نعم**.
4. حدد **تشغيل سير العمل**. في مربع حوار **البحث عن سجل**، سترى عمليات سير المهام التالية:

    - ProcessRunCaller
    - ProcessRunner
    - UpdateRoleUtilization

5. حدد **ProcessRunCaller**، ثم حدد **إضافة**.
6. في مربع الحوار التالي، حدد **موافق**. يكون سير عمل **السكون** متبوعًا بسير عمل **العملية**.

    يمكنك أيضاً تحديد **ProcessRunner** في الخطوة 5. بعد ذلك، عندما تحدد **موافق**، يكون سير عمل **العملية** متبوعًا بسير عمل **السكون**.

يؤدي سير عمل **ProcessRunCaller** و **ProcessRunner** إلى إنشاء الفواتير. **ProcessRunCaller** يستدعي **ProcessRunner**. **ProcessRunner** هو سير العمل الذي ينشئ الفواتير. ينتقل سير العمل هذا عبر جميع شروط التعاقد التي يجب إنشاء الفواتير لها، وينشئ الفواتير. لتحديد شروط التعاقد التي يجب إنشاء الفواتير لها، يبحث سير العمل عن تواريخ تشغيل الفواتير لشروط التعاقد. إذا كانت بنود العقد التي تنتمي لأحد العقود لها نفس تاريخ تشغيل الفاتورة، سيتم تجميع الحركات في فاتورة واحدة بها بندين للفاتورة. إذا لم تكن هناك حركات لإنشاء فواتير لها، لا يتم إنشاء أي فواتير.

بعد انتهاء تشغيل **ProcessRunner**، فإنه يستدعي **ProcessRunCaller**، الذي يوفر وقت النهاية، وويتم إغلاقه. بعد ذلك يبدأ **ProcessRunCaller** المؤقت الذي يعمل على مدار 24 ساعة من وقت النهاية المحدد. وفي نهاية المؤقت، يتم إغلاق **ProcessRunCaller**.

تعد وظيفة معالجة الدفعة لإنشاء الفواتير وظيفة متكررة. إذا تم تشغيل هذه المعالجة الدفعية عده مرات، سيتم إنشاء مثيلات متعددة للوظيفة ويمكنها أن تتسبب في حدوث أخطاء. لحل هذه المشكلة، ابدأ عملية المعالجة الدفعية مرة واحدة فقط، من دون إعادة تشغيلها إذا توقفت.

> [!NOTE]
> لا يتم تشغيل الفوترة الدفعية إلا لبنود عقد المشروع التي تم تكوينها بواسطة جداول الفواتير. يجب أن يحتوي بند العقد مع طريقة فوترة بسعر ثابت على مراحل مكوّنة. سيحتاج بند عقد المشروع مع طريقة فوترة الوقت والمواد إلى إعداد جدول فاتورة يستند إلى التاريخ. ينطبق الأمر نفسه على بند العقد المستند إلى المشروع.      
 
### <a name="edit-a-draft-invoice"></a>تحرير مسودة فاتورة

عند إنشاء مسودة فاتورة مشروع، يتم سحب كافة حركات المبيعات غير المفوترة التي تم إنشاؤها عند الموافقة على إدخالات الوقت والمصروفات إلى الفاتورة. يمكنك إجراء عمليات الضبط التالية في حينما تكون الفاتورة لا تزال في مرحله مسودة:

- قم بحذف تفاصيل بند الفاتورة أو تحريرها.
- قم بتحرير الكمية ونوع الفوترة وتعديلها.
- أضف الوقت والمصروفات والرسوم والمواد مباشرة كحركات على الفاتورة. يمكنك استخدام هذه الميزة في حالة تعيين بند الفاتورة إلى شرط التعاقد الذي يسمح بفئات الحركات هذه.

حدد **تأكيد** لتأكيد الفاتورة. هذا الإجراء هو إجراء أحادي الاتجاه. عندما تحدد **تأكيد**، تصبح الفاتورة للقراءة فقط وتنشئ القيم الفعلية للمبيعات المفوترة من تفاصيل كل بند فاتورة لكل بند فاتورة. إذا كانت تفاصيل بند الفاتورة تشير إلى قيمة فعلية لمبيعات غير مفوترة، فسيتم إلغاء القيمة الفعلية للمبيعات غير المفوترة. ستشير تفاصيل بند فاتورة تم إنشاؤها من إدخال وقت أو مصروفات أو استخدام مواد إلى قيمة مبيعات فعلية غير مفوترة. بإمكان أنظمة تكامل دفتر الأستاذ العام استخدام هذا الإلغاء لإلغاء العمل قيد التقدم للمشروع الحالي لأغراض محاسبية.

### <a name="correct-a-confirmed-invoice"></a>تصحيح فاتورة مؤكدة

يمكن تحرير الفواتير المؤكدة. عندما تقوم بتصحيح فاتورة مؤكدة، يتم إنشاء مسودة فاتورة تصحيحية جديدة. لأن الافتراض هو أنك تريد إلغاء كافة الحركات والكميات من الفاتورة الأصلية، فان هذه الفاتورة التصحيحية تتضمن كافة الحركات من الفاتورة الاصلية، وكافة الكميات الموجودة بها هي 0 (صفر).

عند وجود حركات لا تتطلب التصحيح، يمكنك إزالتها من مسودة الفاتورة التصحيحية. إذا كنت ترغب في إلغاء أو إرجاع كمية جزئيه فقط، فيمكنك تحرير حقل **الكمية** في تفاصيل البند. إذا قمت بفتح تفاصيل بند الفاتورة، فيمكنك الاطلاع على كمية الفاتورة الأصلية. يمكنك بعد ذلك تحرير كمية الفاتورة الحالية حتى تكون أقل من أو أكبر من كمية الفاتورة الأصلية.

عندم تقوم بتأكيد فاتورة تصحيحية، يتم إلغاء القيمة الفعلية للمبيعات المفوترة الأصلية، وإنشاء القيمة الفعلية للمبيعات المفوترة الجديدة. إذا تم خفض الكمية، فإن الفرق سيتسبب في إنشاء قمة فعلية لمبيعات غير مفوترة جديدة أيضًا. على سبيل المثال، إذا كانت المبيعات الأصلية المفوترة لمدة ثماني ساعات، وكانت تفاصيل بند الفاتورة التصحيحية تحتوي على كمية مخفضة تبلغ ست ساعات، فسيتم إلغاء بند المبيعات الأصلي المفوتر ويتم إنشاء قيمتين فعليتين جديدتين:

- قيمة فعلية لمبيعات تمت فوترتها لست ساعات.
- قيمة فعلية لمبيعات غير مفوترة للساعتين المتبقيتين. يمكن فوترة هذه الحركة لاحقًا أو وضع علامة عليها على أنها غير خاضعة للرسوم، وذلك وفقًا للمفاوضات مع العميل.



[!INCLUDE[footer-include](../../includes/footer-banner.md)]
