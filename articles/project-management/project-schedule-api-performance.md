---
title: أداء واجهة برمجة التطبيقات لجدولة المشروع
description: يوفر هذا الموضوع معلومات حول معايير أداء واجهات برمجة التطبيقات لجدولة المشروع ويحدد أفضل الممارسات لاستخدامها.
author: ruhercul
ms.date: 11/03/2021
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: 3c14d27c561a86cd359cbdcbb448ae764dd3d90e
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/14/2022
ms.locfileid: "8593826"
---
# <a name="project-schedule-api-performance"></a>أداء واجهة برمجة التطبيقات لجدولة المشروع

_**تنطبق على:** ‏Project Operations للسيناريوهات المستندة إلى الموارد/غير المخزنة، النشر الخفيف - التعامل مع الفواتير الأولية، Project for the web_

يوفر هذا الموضوع معلومات حول معايير أداء واجهات برمجة التطبيقات (API) لجدولة المشروع ويحدد أفضل الممارسات لاستخدامها الاستخدام الأمثل.

## <a name="project-scheduling-service"></a>خدمة جدولة المشروع
خدمة جدولة المشروع هي خدمة لعدة مستأجرين تعمل في Microsoft Azure. فقد تم تصميمه لتحسين التفاعل من خلال توفير تجربة سريعة ومتفاعلة عندما يعمل المستخدمون في المشروعات. يتم تحقيق هذا التحسين من خلال قبول طلبات التغيير ومعالجتها ثم إرجاع النتيجة فورًا. تستمر الخدمة بشكل غير متزامن مع Dataverse ولا تمنع المستخدمين من تنفيذ عمليات أخرى.

تعمل واجهات برمجة التطبيقات لجدولة المشروع على خدمة جدولة المشروع لتشغيل الطلبات الموضحة بتفاصيل أكثر في الأقسام اللاحقة من هذا الموضوع.

يتم تصميم واجهات برمجة التطبيقات لجدولة المشروع للعمل مع كيانات هيكل تنظيم العمل (WBS) التالي:

  - Project
  - مهمة المشروع
  - تبعية مهمة المشروع
  - عضو فريق المشروع
  - تعيين المورد
  
يتم دعم كل من الحقول الجاهزة والحقول المخصصة. إذا لم يتم الإشارة إلى غير ذلك، يتم دعم جميع العمليات الشائعة، مثل الإنشاء والتحديث والحذف. لمزيد من المعلومات، راجع [استخدام واجهات برمجة التطبيقات لجدولة المشروع لتنفيذ العمليات وجدولة الكيانات](schedule-api-preview.md).

كجزء من واجهات برمجة التطبيقات لجدولة المشروع، تمت إضافة نمط وحدة عمل. يُعرف هذا النمط باسم OperationSet، ويمكن استخدامه عند معالجة العديد من الطلبات في صفقة واحدة.

يوضح الشكل التوضيحي التالي التدفق الذي سيختبره الشريك عند استخدام هذه الميزة.

![Dataverse وسير مهمة خدمة جدولة المشروع.](./media/dataverse-project-scheduling-service-flow.png)

**الخطوة 1**: يقوم العميل بإجراء استدعاء واجهة برمجة التطبيقات لنقطة نهاية ‏‫بروتوكول البيانات المفتوحة‬ (OData) في Dataverse لإنشاء OperationSet.

**الخطوة 2**: بعد إنشاء OperationSet الجديدة، يتم إرجاع قيمة **OperationSetId**.

**الخطوة 3**: يستخدم العميل قيمة **OperationSetId** لجعل طلب واجهة برمجة تطبيقات جدولة مشروع آخر. ونتج عن ذلك إنشاء طلب أو تحديثه أو حذفه على كيان جدولة. عند تقديم هذا الطلب، يتم التحقق من صحة بيانات التعريف. وفي حالة فشل التحقق من الصحة، يتم إنهاء الطلب ثم إرجاع خطأ.

**الخطوات من 4a إلى 4c**: تمثل هذه الخطوات مرحلة القبول. يستدعي العميل واجهة برمجة التطبيقات **ExecuteOperationSetV1**، التي ترسل كافة التغييرات إلى خدمة جدولة المشروع في الدفعة. تعمل خدمة جدولة المشروع على تشغيل عمليات التحقق الخاصة بها بشأن الطلبات التي يتم تقديمها في الدفعة. يؤدي أي فشل للتحقق من الصحة إلى التراجع عن الدفعة ثم إرجاع استثناء للمتصل. وفي حالة قبول الدفعة بنجاح بواسطة خدمة جدولة المشروع، يتم تحديث حالة OperationSet لتعكس حقيقة أن OperationSet تتم معالجتها بواسطة خدمة جدولة المشروع.

**الخطوة 5**: تمثل هذه الخطوة مرحلة الاستمرار. تكتب خدمة جدولة المشروع بشكل غير متزامن الدفعة إلى Dataverse في معاملة. في حالة نجاح عملية الكتابة، يتم وضع علامة على OperationSet على أنها **مكتملة**. تتراجع أية أخطاء إلى المعاملة والدفعة، ويتم وضع علامة على OperationSet على أنها **فشل**.

## <a name="performance-methodology"></a>منهجية الأداء
يتم تعريف وقت التنفيذ على أنه الوقت من الاستدعاء إلى واجهة برمجة التطبيقات **ExecuteOperationSetV1** حتى تنتهي خدمة جدولة المشروع من الكتابة إلى Dataverse. تعمل كافة العمليات 2200 مرة مدمجة ويتم قياس وحدات قياس وقت تنفيذ P99. يتم قياس عمليات السجل الواحد والعمليات المجمعة.

لعملية في سجل واحد، تحتوي العملية OperationSet على طلب واحد. بالنسبة للعمليات المجمعة، فإنه يحتوي على 20 أو 50 أو 100 طلب. يتم إعلام كل حجم مجمع بشكل منفصل.

يتم تشغيل هذه العمليات على النشر UR 15 Project Operations Lite في أمريكا الشمالية.

## <a name="results"></a>النتائج
### <a name="create-operations"></a>عمليات الإنشاء
#### <a name="single-record-create-operations"></a>عمليات إنشاء سجل واحد
يوضح الجدول التالي أوقات التنفيذ لإنشاء سجل واحد. الأوقات بالثوان.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">نوع&nbsp;&nbsp;&nbsp;السجل</th>
    <th class="tg-0lax" colspan="2">الوقت</th>
  </tr>
  <tr>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">2.5</td>
    <td class="tg-0lax">3.78</td>
  </tr>
  <tr>
    <td class="tg-0lax">مهمة</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">التعيين</td>
    <td class="tg-0lax">9.19</td>
    <td class="tg-0lax">9.19</td>
  </tr>
  <tr>
    <td class="tg-0lax">عضو الفريق</td>
    <td class="tg-0lax">0.84</td>
    <td class="tg-0lax">4.2</td>
  </tr>
  <tr>
    <td class="tg-0lax">التبعية</td>
    <td class="tg-0lax">8.84</td>
    <td class="tg-0lax">8.84</td>
  </tr>
</tbody>
</table>

#### <a name="bulk-create-operations"></a>عمليات إنشاء مجمعة
يوضح الجدول التالي أوقات التنفيذ لإنشاء العديد من السجلات. وبشكل خاص، قامت Microsoft بقياس أوقات تنفيذ إنشاء 20 و50 و100 سجل في OperationSet واحدة. الأوقات بالثوان.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">نوع&nbsp;&nbsp;&nbsp;السجل</th>
    <th class="tg-0lax" colspan="6">الوقت</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 سجل</th>
    <th class="tg-0lax" colspan="2">50 سجل</th>
    <th class="tg-0lax" colspan="2">100 سجل</th>
  </tr>
  <tr>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">مهمة</td>
    <td class="tg-0lax">19.92</td>
    <td class="tg-0lax">38.35</td>
    <td class="tg-0lax">36.67</td>
    <td class="tg-0lax">99.13</td>
    <td class="tg-0lax">116.77</td>
    <td class="tg-0lax">174.06</td>
  </tr>
  <tr>
    <td class="tg-0lax">التعيين</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">13.94</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">43.95</td>
    <td class="tg-0lax">69.38</td>
    <td class="tg-0lax">69.38</td>
  </tr>
  <tr>
    <td class="tg-0lax">التبعية</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">30.04</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">77.82</td>
    <td class="tg-0lax">176.89</td>
    <td class="tg-0lax">176.89</td>
  </tr>
</tbody>
</table>

> [!NOTE] 
> لا يتم تضمين عمليات الإنشاء المجمعة على كيانات **المشروع** و **عضو الفريق** في هذا الجدول، لأن وقت التشغيل لتلك العمليات يشبه وقت التشغيل عندما يتم استدعاء واجهة برمجة التطبيقات لإنشاء سجل واحد عدة مرات. يتم تشغيل واجهات برمجة التطبيقات هذه في الحال في Dataverse.

يوضح الشكل التوضيحي التالي جزء من أوقات التنفيذ للكيانات **المهمة** و **التعيين** و **التبعية** عندما يتم إنشاء 20 و50 و100 سجل يتم استخدام جميع الحقول المدعومة.

![قم بإنشاء رسم بياني لوقت تنفيذ السجل.](./media/create-record-execution-time.png)

### <a name="update-operations"></a>عمليات التحديث
#### <a name="single-record-update-operations"></a>عمليات تحديث سجل واحد
يوضح الجدول التالي أوقات التنفيذ لتحديثات سجل واحد. الأوقات بالثوان.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">نوع&nbsp;&nbsp;&nbsp;السجل</th>
    <th class="tg-0lax" colspan="2">الوقت</th>
  </tr>
  <tr>
    <th class="tg-0lax">الحقول المطلوبة </th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">Project</td>
    <td class="tg-0lax">9.53</td>
    <td class="tg-0lax">13.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">مهمة</td>
    <td class="tg-0lax">8.82</td>
    <td class="tg-0lax">9.91</td>
  </tr>
  <tr>
    <td class="tg-0lax">عضو الفريق</td>
    <td class="tg-0lax">9</td>
    <td class="tg-0lax">8.96</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> إن عمليات التحديث الخاصة بكيانات **تعيينات المورد** و **تبعية مهمة المشروع** غير مدعومة.

#### <a name="bulk-update-operations"></a>عمليات تحديث مجمعة
يوضح الجدول التالي أوقات التنفيذ لتحديثات العديد من السجلات. وبشكل خاص، قامت Microsoft بقياس أوقات تنفيذ تحديثات 20 و50 و100 سجل في OperationSet واحدة. الأوقات بالثوان.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="3">نوع&nbsp;&nbsp;&nbsp;السجل</th>
    <th class="tg-0lax" colspan="6">الوقت</th>
  </tr>
  <tr>
    <th class="tg-0lax" colspan="2">20 سجل</th>
    <th class="tg-0lax" colspan="2">50 سجل</th>
    <th class="tg-0lax" colspan="2">100 سجل</th>
  </tr>
  <tr>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
    <th class="tg-0lax">الحقول المطلوبة</th>
    <th class="tg-0lax">كل الحقول مدعومة</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">مهمة</td>
    <td class="tg-0lax">8.91</td>
    <td class="tg-0lax">38.71</td>
    <td class="tg-0lax">20.92</td>
    <td class="tg-0lax">87.13</td>
    <td class="tg-0lax">36.68</td>
    <td class="tg-0lax">190.34</td>
  </tr>
  <tr>
    <td class="tg-0lax">عضو الفريق</td>
    <td class="tg-0lax">20.52</td>
    <td class="tg-0lax">26.06</td>
    <td class="tg-0lax">41.93</td>
    <td class="tg-0lax">44.51</td>
    <td class="tg-0lax">38.63</td>
    <td class="tg-0lax">66.53</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> إن عمليات التحديث الخاصة بكيانات **تعيينات المورد** و **تبعية مهمة المشروع** غير مدعومة.

يوضح الشكل التوضيحي التالي جزء من أوقات التنفيذ للكيانات المهمة وعضو الفريق عندما يتم تحديث 20 و50 و100 سجل يتم استخدام جميع الحقول المدعومة.

![قم بتحديث رسم بياني لوقت تنفيذ السجل.](./media/update-record-execution-time.png)

### <a name="delete-operations"></a>عمليات الحذف
#### <a name="single-record-delete-operations"></a>عمليات حذف سجل واحد
يوضح الجدول التالي أوقات التنفيذ لإنشاء سجل واحد. الأوقات بالثوان.

| نوع السجل | الوقت  |
|-------------|-------|
| مهمة        | 20.12 |
| التعيين  | 10.86 |
| عضو الفريق | 12.52 |
| التبعية  | 20.89 |

> [!NOTE]
> إن عمليات الحذف الخاصة بالكيان **المشروع** غير مدعومة.

#### <a name="bulk-delete-operations"></a>عمليات الحذف المجمعة
يوضح الجدول التالي أوقات التنفيذ لحذف العديد من السجلات. وبشكل خاص، قامت Microsoft بقياس أوقات تنفيذ حذف 20 و50 و100 سجل في OperationSet واحدة. الأوقات بالثوان.

<table class="tg">
<thead>
  <tr>
    <th class="tg-0lax" rowspan="2">نوع&nbsp;&nbsp;&nbsp;السجل</th>
    <th class="tg-0lax" colspan="3">الوقت</th>
  </tr>
  <tr>
    <th class="tg-0lax">20 سجل</th>
    <th class="tg-0lax">50 سجل</th>
    <th class="tg-0lax">100 سجل</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax">مهمة</td>
    <td class="tg-0lax">20.91</td>
    <td class="tg-0lax">67.43</td>
    <td class="tg-0lax">71.96</td>
  </tr>
  <tr>
    <td class="tg-0lax">التعيين</td>
    <td class="tg-0lax">11.75</td>
    <td class="tg-0lax">25.79</td>
    <td class="tg-0lax">47.66</td>
  </tr>
  <tr>
    <td class="tg-0lax">عضو الفريق</td>
    <td class="tg-0lax">9.78</td>
    <td class="tg-0lax">39.73</td>
    <td class="tg-0lax">24.33</td>
  </tr>
  <tr>
    <td class="tg-0lax">التبعية</td>
    <td class="tg-0lax">24.61</td>
    <td class="tg-0lax">54.9</td>
    <td class="tg-0lax">109.16</td>
  </tr>
</tbody>
</table>

> [!NOTE]
> إن عمليات الحذف الخاصة بالكيان **المشروع** غير مدعومة.

يوضح الشكل التوضيحي التالي جزء من أوقات التنفيذ للكيانات **المهمة** و **التعيين** و **عضو الفريق** و **التبعية** عندما يتم إنشاء 20 و50 و100 سجل.

![قم بحذف رسم بياني لوقت تنفيذ السجل.](./media/delete-record-execution-time.png)

## <a name="observations"></a>الملاحظات
بالنسبة لكل عملية سجل، تستغرق واجهة برمجة التطبيقات **ExecuteOperationSet** حوالي مللي ثانية لإرسال طلب إلى خدمة جدولة المشروع. تستغرق خدمة جدولة المشروع بعد ذلك حوالي خمس ثوان لمعالجة الحمولة واستدعاء Dataverse. يتم استخدام بقية وقت التنفيذ في تشغيل منطق الأعمال وكتابة البيانات إلى قاعدة البيانات في Dataverse.

عندما يتم إنشاء 100 سجل أو تحديثه أو حذفه، تستغرق واجهة برمجة التطبيقات **ExecuteOperationSet** حوالي ثلاث ثوان لإرسال الطلب إلى خدمة جدولة المشروع. تستغرق خدمة جدولة المشروع بعد ذلك حوالي خمس ثوان لمعالجة الطلبات واستدعاء Dataverse. يجب أن تدفع العمليات المجمعة **ضريبة خدمة جدولة المشروع** مرة واحدة، لجميع السجلات في OperationSet. وبالتالي، تحتوي العمليات المجمعة على متوسط وقت تنفيذ أقل إلى حد كبير من عمليات السجل الواحد.

## <a name="scenarios"></a>السيناريوهات
يوضح الجدول التالي أوقات التنفيذ عندما يتم استخدام واجهات برمجة التطبيقات لجدولة المشروع لإنجاز سيناريوهات معينة. الأوقات بالثوان.

| السيناريو                                                                   | الوقت  |
|----------------------------------------------------------------------------|-------|
| قم بإنشاء مشروع يحتوي على 40 مهمة.                                      | 36.01 |
| قم بإنشاء مشروع يحتوي على 40 مهمة و20 تبعية.                  | 38.11 |
| قم بإنشاء مشروع يحتوي على 40 مهمة و30 مهمة.                   | 60.17 |
| قم بإنشاء مشروع يحتوي على 40 مهمة و20 تبعية و30 مهمة. | 60.27 |

## <a name="best-practices"></a>أفضل الممارسات
استنادًا إلى نتائج السيناريو السابق، تقوم واجهات برمجة التطبيقات بتنفيذ أداء أفضل في الحالات التالية:

  - قم بتجميع أكبر عدد ممكن من العمليات قدر الإمكان. إن متوسط مقدار الوقت للعمليات المجمعة أفضل من متوسط وقت التشغيل لعمليات السجل الواحد. كلما كان عدد OperationSets أقل في الاستخدام، كان متوسط وقت التنفيذ أسرع.
  - قم بتعيين الحد الأدنى فقط من السمات المطلوبة لتنفيذ السيناريو الخاص بك. كن انتقائيًا حول أنواع الحقول غير المطلوبة المضمنة في طلب OperationSet. ستؤثر الحقول التي تحتوي على مفاتيح أو حقول القيمة المحتسبة سلبًا على الأداء.
