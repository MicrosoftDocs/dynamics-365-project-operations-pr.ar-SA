---
title: ترحيل مراحل الفوترة التي تم تحرير فواتير بها بالكامل عند الانتقال
description: يشرح هذا الموضوع كيفية ترحيل المراحل الرئيسية لفوترة السعر الثابت التي تمت فوترتها للعميل لعقود المشروع المفتوحة قبل تاريخ العرض المباشر.
author: sigitac
ms.date: 01/10/2022
ms.topic: article
ms.reviewer: johnmichalak
ms.author: sigitac
ms.openlocfilehash: ccdba864a68521024b2c479c12cf5cea616c5bbf
ms.sourcegitcommit: c0792bd65d92db25e0e8864879a19c4b93efb10c
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 04/14/2022
ms.locfileid: "8576254"
---
# <a name="migrate-fully-invoiced-billing-milestones-at-cutover"></a>ترحيل مراحل الفوترة التي تم تحرير فواتير بها بالكامل عند الانتقال

_**ينطبق على:** Project Operations للسيناريوهات المستندة إلى موارد/منتجات غير مخزنة‬_

## <a name="scenario"></a>السيناريو

تعرض شركة Contoso مباشرة مع Microsoft Dynamics 365 Project Operations لسيناريوهات الموارد/غير المخزنة. كجزء من أنشطة الانتقال، يجب على فريق التنفيذ ترحيل عقود المشاريع المفتوحة من النظام القديم. تتضمن بعض عقود المشروع شروط التعاقد التي تستخدم طريقة إعداد الفواتير بسعر ثابت وقد تم بالفعل إصدار فاتورة جزئية للعميل النهائي. يجب أن يقوم فريق التنفيذ بترحيل مراحل إعداد الفواتير هذه على أنها **فاتورة العميل التي تم ترحيلها**، لأنه يجب تضمينها في إجمالي قيمة العقد لأغراض التعرف على الإيرادات. ومع ذلك، يجب ألا تتأثر أرصدة العملاء في حسابات المقبوضات ودفتر الأستاذ العام.

## <a name="solution"></a>الحل

### <a name="prerequisites"></a>المتطلبات

- يجب تثبيت الإصدار 10.0.24 من Dynamics 365 Finance أو الإصدارات الأحدث.
- يجب أن تكون البيئة حيث سيتم إكمال خطوات الترحيل في وضع الصيانة. لا ينبغي إجراء أي أنشطة أخرى أثناء ترحيل المراحل الرئيسية.
- يجب اتباع خطوات الترحيل بدقة كما هو موضح هنا ويمكن استخدامها فقط لنشاط الانتقال المرحلي. لا تدعم Microsoft أي استخدام آخر لهذه الإمكانية.

### <a name="create-a-cutover-version-of-the-project-operations-integration-contract-line-milestones-dual-write-map"></a>قم بإنشاء نسخة انتقالية لخريطة الكتابة المزدوجة لخط عقد تكامل Project Operations 

1. تأكد من تحديث التعيين المستهدف لكيان **المراحل الرئيسية لشروط عقد تكامل Project Operations**. 

    1. في Finance، انتقل إلى **إدارة البيانات** \> **كيانات البيانات**، وحدد الكيان **المراحل الرئيسية لشروط عقد تكامل Project Operations**. 
    2. حدد **تعديل تعيينات الهدف**. 
    3. على صفحة **تعيين الشكل المرحلي إلى الهدف**، حدد **إنشاء التعيين**، ثم قم بتأكيد أنك تريد إنشاء التعيين.

2. توقف وقم بتحديث مخططات الكتابة المزدوجة لـ **المراحل الرئيسية لشروط عقد تكامل Project Operations** (**msdyn\_contractlinescheduleofvalues**). 

    1. انتقل إلى **إدارة البيانات** \> **الكتابة المزدوجة**، وحدد المخطط وافتح تفاصيله. 
    2. حدد **توقف**، وانتظر حتى يتوقف النظام عن التعيين. 
    3. حدد **تحديث الجداول**.

3. أضف تعيينًا لحالة المعاملة.

    1. حدد **إضافة تعيين**.
    2. في السطر الجديد، في عمود **تطبيقات التمويل والعمليات**، حدد الحقل **TRANSSTATUS \[TRANSSTATUS\]**.
    3. في العمود **Microsoft Dataverse**، حدد **msdyn\_invoicestatus \[حالة الفاتورة\]**.
    4. في العمود **نوع الخريطة**، حدد السهم الأيمن (**\>**).
    5. في مربع الحوار الذي يظهر، في حقل **اتجاه المزامنة**، حدد **Dataverse لتطبيقات التمويل والعمليات**.
    6. حدد **إضافة تحويل**.
    7. في حقل **نوع التحويل**، حدد **ValueMap**.
    8. حدد **إضافة تعيين قيمة**.
    9. في الحقل الأيسر، أدخل **4**. في الحقل الأيمن، أدخل **192350001**. 
    10. حدد **حفظ**، وقم بإغلاق مربع الحوار.

4. حدد **حفظ باسم** لحفظ إصدار مخطط الكتابة المزدوجة. 
5. في جزء **إضافة جدول**، في الحقل **الناشر**، قم بتحديد **الناشر الافتراضي**.
6. في حقل **الإصدار**، أدخل الإصدار.
7. في الحقل **الوصف**، أدخل ملاحظة حول الإصدار المرحلي هذا من الخريطة. 
8. حدد **حفظ.**.
9. بدء التعيين.

### <a name="migrate-invoiced-milestones-to-the-dataverse-environment"></a>ترحيل المراحل الرئيسية المفوترة إلى بيئة Dataverse

1. في بيئة Project Operations Dataverse، قم بإنشاء الأحداث الرئيسية التي لها حالة فاتورة **جاهزة للفوترة**. في هذه المرحلة، لا تقم بترحيل أية أحداث رئيسية لم يتم تحرير فواتير بها.

    > [!NOTE]
    > قبل ترحيل المراحل الرئيسية للفوترة، تأكد من تعيين الأبعاد المالية المرتبطة بشروط تعاقد المشروع كما هو متوقع. لا يمكن تحرير الأبعاد المالية بعد اكتمال الترحيل.

2. بعد ترحيل جميع الأحداث الرئيسية، أوقف مخططات الكتابة المزدوجة التالية:

    - المراحل الرئيسية لشروط عقد تكامل Project Operations ‏(msdyn\_contractlinescheduleofvalues)
    - القيم الفعلية لتكامل Project Operations (msdyn\_actuals)
    - اقتراح فواتير المشروع V2 (الفواتير)

    لإيقاف الخرائط، اتبع الخطوات التالية:

    1. في Finance، انتقل إلى **إدارة البيانات** \> **الكتابة المزدوجة**، وحدد مخطط وافتح تفاصيله.
    2. حدد **توقف**، وانتظر حتى يتوقف النظام عن التعيين.

3. في بيئة Project Operations Dataverse، قم بإنشاء وتأكيد الفواتير المبدئية لمراحل إعداد الفواتير الرئيسية. 

    1. في مخطط الموقع، انتقل إلى عقود المشروع، وحدد العقود، ثم حدد **إنشاء الفواتير**.
    2. بعد إنشاء الفواتير، افتحها من قائمة **الفواتير** في مخطط الموقع، ثم حدد **تأكيد**.

    تقوم هذه الخطوة بإنشاء السجلات المطلوبة في بيئة Dataverse ومع ذلك، فإنه لا يؤثر على البيانات المالية وحسابات المقبوضات، لأنه تم إيقاف مخططات الكتابة المزدوجة المدرجة سابقًا.

4. بعد تأكيد جميع الفواتير الأولية، أعد جميع مخططات الكتابة المزدوجة إلى حالتها الأولية.

    1. قم بتحديث مخططات الكتابة المزدوجة لـ **المراحل الرئيسية لشروط عقد تكامل Project Operations** (**msdyn\_contractlinescheduleofvalues**) إلى الأصل مرة أخرى. 
    2. حدد مخطط الكتابة المزدوجة في قائمة الخريطة، وحدد **إصدار مخطط الجدول**، ثم حدد الإصدار الأصلي من مخطط الجدول.
    3. حدد **حفظ.**.
    4. أعد تشغيل مخططات الكتابة المزدوجة التالية:

        - المراحل الرئيسية لشروط عقد تكامل Project Operations ‏(msdyn\_contractlinescheduleofvalues)
        - القيم الفعلية لتكامل Project Operations (msdyn\_actuals)
        - اقتراح فواتير المشروع V2 (الفواتير)

يتم الآن ترحيل الأحداث الرئيسية، والنظام جاهز للخطوات التالية في نشاط الانتقال.
