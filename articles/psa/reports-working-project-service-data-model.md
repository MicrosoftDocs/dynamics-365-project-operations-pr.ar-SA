---
title: العمل مع نموذج بيانات Project Service Automation
description: يقدم هذا الموضوع معلومات حول كيفية العمل مع نموذج البيانات.
author: ruhercul
manager: kfend
ms.service: project-operations
ms.custom:
- dyn365-projectservice
ms.date: 03/01/2019
ms.topic: article
ms.author: ruhercul
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: 8d63a1b36abe0a154c43e99738340f32f28c2f5e
ms.sourcegitcommit: 4cf1dc1561b92fca4175f0b3813133c5e63ce8e6
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 10/28/2020
ms.locfileid: "4120257"
---
# <a name="working-with-the-project-service-automation-data-model"></a>العمل مع نموذج بيانات Project Service Automation

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

يوسع Dynamics 365 Project Service Automation كيانات التطبيقات الأخرى ويقدم الكيانات الخاصة بها في نموذج بيانات Common Data Service. يوضح هذا الموضوع بعض الكيانات التي ستواجهها في سيناريوهات إعداد التقارير النموذجية الخاصة بـ PSA.

## <a name="reporting-on-opportunities"></a>إعداد التقارير حول الفرص

يقوم Project Service Automation بتوسيع كيان **الفرصة** في Dynamics 365 Sales عن طريق إضافة الحقول التي تُمكن السيناريوهات المستندة إلى المشروع. يتم تحديد  هذه الحقول بواسطة اسم مخطط مسبوق بـ **msdyn\_**. وهناك حقل جديد مهم واحد لإعداد التقارير حول فرص PSA هو **نوع الأمر**. وتشير قيمة **مستند إلى العمل** لهذا الحقل إلى أن الفرصة هي فرصة PSA. وتتضمن الحقول الأخرى التي تمت إضافتها إلى الكيان **مؤسسة التعاقد**، التي تلتقط المؤسسة التي تحتفظ بالفرصة، و **مدير الحساب** الذي يلتقط اسم مدير الحساب الذي يكون هو مسؤول عن الفرصة.

كما يشتمل كيان **بند الفرصة** على حقول ذات صلة بـ Project Service. تشير **طريقة الفوترة** إلى ما إذا كان ينبغي فوترة سطر الفرصة على أساس الوقت والمواد أو أساس سعر ثابت، ويلتقط **المشروع** اسم المشروع الذي يقوم بالنسخ الاحتياطي للفرصة. تلتقط الحقول الأخرى التي يمكنك الإبلاغ عنها التكاليف ومبالغ موازنة العميل لصنف البند.

## <a name="reporting-on-quotes"></a>إعداد التقارير حول عروض الأسعار

يقوم PSA بتوسيع كيان **عرض أسعار** المبيعات عن طريق إضافة الحقول ذات الصلة بالمشروع. يميز **نوع الأمر** عروض أسعار PSA عن عروض أسعار غير PSA. وتشير قيمة **مستند إلى العمل** لهذا الحقل إلى أن عرض الأسعار هو عرض أسعار PSA. الحقول الأخرى التي يمكن أن تكون ذات صلة بإعداد التقارير حول عروض PSA تتضمن حقول المبالغ، مثل **التكاليف الخاضعة للرسوم** و **التكاليف غير الخاضعة للرسوم** و **إجمالي هامش الربح** و **التقديرات** و **الموازنة**. وتشير الحقول الأخرى المفيدة إلى ما إذا كان عرض الأسعار مربحًا، وما إذا كان سيتم استكماله في الجدولة، وما إذا كان يستوفي توقعات الموازنة الخاصة بالعميل.

كما يقوم PSA بتوسيع كيان **بند عرض أسعار** المبيعات. وهناك حقل واحد يضيفه PSA هو **طريقة الفوترة**، الذي يشير إلى كيفية فوترة سطر عرض الأسعار (الوقت والمواد أو السعر الثابت). تلتقط الحقول الأخرى التي تمت إضافتها إلى الكيان المشروع المرتبط الذي يقوم بالنسخ الاحتياطي لبند عرض الأسعار والفواتير والتكلفة والموازنة.

كما يضيف PSA الكيانات المرتبطة بعروض الأسعار الجديدة إلى نموذج بيانات Dynamics 365. وإليك بعض الأمثلة:

- **تفاصيل بند عرض الأسعار** – يشتمل هذا الكيان على تفاصيل تقدير المشروع الخاصة ببند عرض الأسعار. إنه يتضمن سجلين لكل بند من بنود عرض الأسعار. يقوم سجل بتخزين تفاصيل التكلفة والتكلفة لبند عرض الأسعار، ويقوم السجل الآخر بتخزين مقدار المبيعات وتفاصيل المبيعات الخاصة ببند عرض الأسعار.
- **جدولة فاتورة بند عرض الأسعار** - يشتمل هذا الكيان على جدول الفوترة لبند عرض الأسعار. ويتم إنشاء هذا الجدول بناء على معدل تكرار الفوترة الذي تم تعيينه إلى بند عرض الأسعار.
- **المرحلة الرئيسية لبند عرض الأسعار** – يشتمل هذا الكيان على المراحل الرئيسية للفوترة لبنود عروض الأسعار الثابتة.
- **تقسيم تحليلات بنود عروض الأسعار** – يشتمل هذا الكيان على التفاصيل المالية لبند عرض الأسعار. يمكن أن تكون هذه التفاصيل مفيدة لإعداد التقارير حول المبيعات المسعرة ومبالغ التكلفة المقدّرة حسب الأبعاد المختلفة.

والكيانات الأخرى التي يضيفها PSA إلى عروض الأسعار هي **قائمة أسعار مشروع بند عرض الأسعار** و **فئة مورد بند عرض الأسعار** و **فئة حركة بند الأسعار**.

![رسم بياني يوضح عرض الأسعار وبند عرض الأسعار و علاقات المشروع](media/PS-Reporting-image2.png "رسم بياني يوضح عرض الأسعار وبند عرض الأسعار و علاقات المشروع")

## <a name="reporting-on-project-contracts"></a>إعداد التقارير حول عقود المشاريع

يقوم PSA بتوسيع كيان **أمر** المبيعات الذي يتم استخدامه عند تسجيل عقود المشاريع. إنه يضيف حقلاً مهمًا جديدًا، **نوع الأمر**، الذي يحدد العقد كعقد مشروع PSA بدلاً من أمر المبيعات. وتشير قيمة **مستند إلى العمل** لهذا الحقل إلى أن الأمر هو عقد مشروع PSA. وتلتقط الحقول الأخرى الجديدة التي تمت إضافتها إلى كيان **الأمر** تفاصيل حول التكاليف، وحاله عقد PSA، والمؤسسة التي تملك العقد.

كما يقوم PSA بتوسيع كيان **بند أمر المبيعات**. من بين الحقول التي يضيفها هي حقول تلتقط طريقة الفوترة (الوقت والمواد أو السعر الثابت) ومبالغ موازنة العميل والمشروع الأساسي.

كما يضيف PSA أيضًا كيانات جديدة تم تصميمها لعقود المشاريع. وإليك بعض الأمثلة:

- **تفاصيل بنود عقد المشروع** - يتضمن هذا الكيان التفاصيل على مستوى البند التي يتم تجميعها لمبلغ بنود العقد. ويمكن أن تكون هذه العناصر تفصيلية مثل أصناف البنود التي يتم إنشاؤها من جدولة مشروع على مستوى المهمة.
- **جدولة فواتير بنود العقد** – يشتمل هذا الكيان على جدول الفوترة الذي تم إنشاؤه استنادًا إلى معدل تكرار الفاتورة الذي تم تعيينه إلى بند العقد.
- **المرحلة الرئيسية للعقد** - يحتوي هذا الكيان على المراحل الرئيسية للفوترة لبنود العقد التي تحتوي على مصطلح فوترة ثابت السعر.

والكيانات الأخرى التي يضيفها PSA إلى العقود هي **قائمة أسعار مشروع بند عقد المشروع** و **فئة مورد بند عقد المشروع** و **فئة حركة بند عقد المشروع**.

![رسم بياني يوضح الأمر وبند الأمر وعلاقات المشروع](media/PS-Reporting-image3.png "رسم بياني يوضح الأمر وبند الأمر وعلاقات المشروع")

## <a name="reporting-on-projects"></a>إعداد التقارير حول المشاريع

كيان **المشاريع** والكيانات المرتبطة به حصري لـ PSA. **المشروع** هو كيان مستوى أعلى يُستخدم لالتقاط العمل وجانب تكلفة العمليات. فيما يلي قائمة بالكيانات ذات الصلة:

- **عضو فريق المشروع** – يشتمل هذا الكيان على تفاصيل حول الموارد القابلة للحجز التي تم تعيينها للمشروع. يمكن أن تكون تلك الموارد موارد عامة قابلة للحجز، أو يمكن أن تكون موارد قابلة للحجز إما تم إدخالها من قِبل مدير المشروع أو تم إنشاؤها من جدولة المشروع.
- **مهمة المشروع** - يحتوي هذا الكيان على المهام التي تُشكّل خطة المشروع أو جدولته.
- **تعيين المورد** – يحتوي هذا الكيان على تعيين المهمة للمورد القابل للحجز.
- **متطلب المورد** – يتضمن هذا الكيان المتطلبات الخاصة بأي عضو من أعضاء فريق الموارد العامة.
- **التقدير** و **بند التقدير** - تشتمل هذه الكيانات على علاقة رأس/بند وتحتوي على تقديرات المصروفات الخاصة بالمشروع. يتم تخزين تقديرات المهام في كيان **تقدير الموارد**.

![رسم بياني يوضح متطلب المورد وعلاقات المشروع](media/PS-Reporting-image4.png "رسم بياني يوضح متطلب المورد وعلاقات المشروع")

## <a name="reporting-on-resources"></a>إعداد التقارير حول الموارد

تستخدم موارد المشاريع كيانات **الموارد القابلة للحجز** من Universal Resource Scheduling (URS) التي تتم مشاركتها مع تطبيقات أخرى، مثل Microsoft Dynamics 365 Field Service. فيما يلي قائمة بالكيانات التي قد يتعين عليك استخدامها عند إرسال تقرير حول موارد المشروع:

- **المورد القابل للحجز** – يمثل هذا الكيان المستخدم أو جهة الاتصال أو المورد العام أو الحساب أو المجموعة أو المعدات التي يتم استخدامها في فريق المشروع.
- **خصائص الموارد القابلة للحجز** – يتضمن هذا الكيان المهارات أو الشهادات أو التعليم الخاص بالمورد. يمكن أن تحتوي الخصائص على قيم تصنيف يتم تعريفها بواسطة نموذج التصنيف.
- **فئة المورد القابل للحجز** – يمثل هذا الكيان دور المورد القابل للحجز.
- **حجوزات الموارد القابلة للحجز** – يمثل هذا الكيان الوقت المحجوز في المشاريع للمورد. يشتمل كل حجز على كل من كيان الرأس وكيان البند، ويكون لكل بند حالة تمثل حاله الحجز.

![رسم بياني يوضح علاقات خصائص الموارد القابلة للحجز](media/PS-Reporting-image5.png "رسم بياني يوضح علاقات خصائص الموارد القابلة للحجز")

## <a name="reporting-on-actual-transactions"></a>إعداد التقارير عن الحركات الفعلية

عند الموافقة على جدول زمني أو مصروفات أو فوترة عقد في SA ، يتم تسجيل حركة العمل في الكيان **الفعلي**. يمكن أن يعمل هذا الكيان كأساس لكافة التقارير المتعلقة بالتمويل في PSA. يلتقط الكيان **الفعلي** حركات التكلفة والمبيعات لحدث العمل. كما يلتقط أيضًا العديد من السمات ذات الصلة.

عند العمل مع الكيان **الفعلي**، من المهم أن تفهم الحركة أو الحركات التي تم تسجيلها في الكيان، ووقت تسجيل الحركات. وفيما يلي التدفق النموذجي عند العمل مع إدخالات الوقت (التدفق لإدخالات المصروفات مماثل):

1. عند حفظ إدخال الوقت، لا يتم إنشاء أي سجلات في الكيان **الفعلي**.
2. عند إرسال إدخال الوقت، لا يتم إنشاء أي سجلات في الكيان **الفعلي**.
3. عند اعتماد إدخال الوقت، يتم إنشاء سجل واحد في الكيان **الفعلي**، كما يمكن إنشاء سجل ثان. يخزن السجل الأول التكلفة الخاصة بإدخال الوقت. يقوم السجل الثاني بتخزين مبلغ المبيعات غير المفوترة في إدخال الوقت. يعتمد السجل الثاني على المشروع الذي يحتوي إما على عميل أو عرض أسعار أو بند عقد تم تعيينه إليه.

    | تاريخ المستند | ‏‫نوع الحركة | فئة الحركة | العميل         | عقد   | المورد     | دور المورد | نوع الفوترة | الكمية | سعر الوحدة | المبلغ |
    |---------------|------------------|-------------------|------------------|------------|--------------|---------------|--------------|----------|------------|--------|
    | 2/3/18        | تكلفة             | Time              | منزل عادل فريد | عادل CRM | نبيلة الديب | مدير المشروع   | خاضع للرسوم   | 8.0      | 50.00      | 400.00 |
    | 2/3/18        | مبيعات غير مفوترة   | Time              | منزل عادل فريد | عادل CRM | نبيلة الديب | مدير المشروع   | خاضع للرسوم   | 8.0      | 100.00     | 800.00 |

    ويكون هذان السجلين منفصلين ولكنهما سجلان مرتبطان. إنهما ليس أرصدة دائنة ولا مدينة.

4. إذا كان العقد مقترنًا بالمشروع، فعند فوترة إدخال الوقت، يتم إنشاء سجلين آخرين في الكيان **الفعلي**. أولاً، يتم إنشاء مبلغ سالب لسجل المبيعات غير المفوترة. يلغي هذا السجل بشكل أساسي المبيعات غير المفوترة. ثانيًا، يتم إنشاء حركة للمبيعات المفوترة. ومرة أخرى، تعتبر هذه السجلات منفصلة ولكنها سجلات مرتبطة وليست أرصدة دائنة ولا مدينة.

    | تاريخ المستند | ‏‫نوع الحركة | فئة الحركة | العميل         | عقد   | المورد     | دور المورد | نوع الفوترة | الكمية | سعر الوحدة | المبلغ   |
    |---------------|------------------|-------------------|------------------|------------|--------------|---------------|--------------|----------|------------|----------|
    | 2/4/18        | مبيعات غير مفوترة   | Time              | منزل عادل فريد | عادل CRM | نبيلة الديب | مدير المشروع   | خاضع للرسوم   | - 8.0    | 100.00     | - 800.00 |
    | 2/4/18        | المبيعات المفوترة     | Time              | منزل عادل فريد | عادل CRM | نبيلة الديب | مدير المشروع   | خاضع للرسوم   | 8.0      | 100.00     | 800.00   |

ويقوم كيان **أصل الحركة** بتسجيل أصل السجل **الفعلي**، ويقوم كيان **اتصال الحركة** بتسجيل السجلات المرتبطة للسجل **الفعلي**. بالإضافة إلى ذلك، يحتوي السجل **الفعلي** على مراجع للمشروع وعقد المشروع (الأمر) والمورد القابل للحجز والعميل.

![رسم بياني يوضح اتصال المعاملات والأصل والعلاقات الفعلية](media/PS-Reporting-image6.png "رسم بياني يوضح اتصال المعاملات والأصل والعلاقات الفعلية")
