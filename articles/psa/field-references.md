---
title: إضافة حقول مخصصة إلى إعداد الأسعار وكيانات الحركات
description: يقدم هذا المقال معلومات حول إضافة حقول مخصصة لإعداد الأسعار وكيانات الحركات.
author: Rumant
ms.custom:
- dyn365-projectservice
ms.date: 10/01/2020
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365PS
- ProjectOperations
ms.reviewer: johnmichalak
ms.openlocfilehash: b666d1767306b9833fba36c6ed2c59a633c5fdf0
ms.sourcegitcommit: 6cfc50d89528df977a8f6a55c1ad39d99800d9b4
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 06/03/2022
ms.locfileid: "8920458"
---
# <a name="add-custom-fields-to-price-setup-and-transactional-entities"></a>إضافة حقول مخصصة إلى إعداد الأسعار وكيانات الحركات 

[!include [banner](../includes/psa-now-project-operations.md)]

يفترض هذا المقال أنك أكملت الإجراءات الموجودة في المقال، [إنشاء حقول وكيانات مخصصة](create-custom-fields-entities.md). إذا لم تقم بإكمال هذه الإجراءات، فعد إلى الحالة السابقة وأكملها، ثم عد إلى هذا المقال. 

في هذا المقال، سوف توضح لك الإجراءات كيفية إضافة مراجع الحقول المخصصة المطلوبة إلى الكيانات وعناصر واجهه المستخدم (UI) مثل النماذج وطرق العرض.

## <a name="add-custom-pricing-dimension-fields"></a>إضافة حقول أبعاد تسعير مخصصة 
بعد إنشاء الحقول والكيانات المخصصة، تتمثل الخطوة التالية في جعل إعداد السعر وكيانات الحركات علم بأية كيانات مخصصة أو مجموعات خيارات عن طريق إنشاء حقول مرجعية. واستنادا إلى ما إذا كانت قائمة أبعاد التسعير تتضمن أبعاد مجموعة خيارات أو أبعاد كيان أو كلاهما، فاتبع فقط الخطوات الموجودة في **أبعاد التسعير المخصصة المستندة إلى مجموعه الخيارات** أو **أبعاد التسعير المخصصة المستندة إلى الكيان**، أو كلاهما على التوالي.

### <a name="option-set-based-custom-pricing-dimensions"></a>أبعاد التسعير المخصصة المستندة إلى مجموعة خيارات
عندما يكون أحد أبعاد التسعير المخصصة مستندا إلى مجموعة خيارات، فقم بإضافته كحقل إلى كيانات Project Service الأساسية. في الإجراء التالي يتم استخدام **موقع عمل المورد** و **ساعات عمل المورد** كأبعاد تسعير مستندة إلى مجموعة خيارات. يجب إضافة هذه الأبعاد أولا كحقول إلى كيانات التسعير، **سعر الدور** و **رفع سعر الدور**.

1. في Project Service Automation‏ (PSA)، انقر فوق **الإعدادات** > **الحلول**، ثم انقر نقرا مزدوجا فوق **\<your organization name> أبعاد التسعير**. 
2. في مستكشف الحلول، في جزء التنقل الأيسر، حدد **الكيانات > سعر الدور**.
3. قم بتوسيع كيان **سعر الدور** وحدد **الحقول**.
4. انقر فوق **جديد** لإنشاء حقل جديد يسمي **موقع عمل المورد** وحدد **مجموعة خيارات** كنوع حقل. 
5. حدد **استخدام مجموعة خيارات موجودة**، وحدد مجموعة خيارات **موقع عمل المورد**، ثم انقر فوق **حفظ**.
6. كرر الخطوات 1-5 لإضافة هذا الحقل إلى كيان **رفع سعر الدور**. 
7. كرر الخطوات 1 - 5 لمجموعة خيارات **ساعات عمل المورد**.

> [!IMPORTANT]
> عندما تقوم بإضافة حقل إلى أكثر من كيان واحد، استخدم نفس اسم الحقل عبر كافة الكيانات. 

> ![إضافة موقع عمل المورد إلى سعر الدور.](media/RWL-Field.png)

في مراحل المبيعات والتقدير الخاصة بمشروع، يتم استخدام تقديرات جهد العمل المطلب لاستكمال **عمل محلي** و **في الموقع** في **ساعات منتظمة** و **ساعات إضافية** لتقدير قيمة عرض الأسعار/المشروع. ستتم إضافة حقول **موقع عمل المورد** و **ساعات عمل المورد** إلى كيانات التقدير، **تفاصيل بند عرض الأسعار**، و **تفاصيل شروط التعاقد** و **مهمة المشروع** و **عضو فريق المشروع** و **بند التقدير**.

1. في PSA، انقر فوق **الإعدادات** > **الحلول**، ثم انقر نقرًا مزدوجًا فوق **\<your organization name> أبعاد التسعير**. 
2. في مستكشف الحلول، في جزء التنقل الأيسر، حدد **الكيانات > تفاصيل بند عرض الأسعار**.
3. قم بتوسيع الكيان **تفاصيل بند عرض الأسعار**، وحدد **الحقول**.
4. انقر فوق **جديد** لإنشاء حقل جديد يسمي **موقع عمل المورد** وحدد نوع الحقل **مجموعة خيارات**. 
5. حدد **استخدام مجموعة خيارات موجودة** و **موقع عمل المورد**، ثم انقر فوق **حفظ**.
6. كرر الخطوات من 1 إلى 5 لإضافة هذا الحقل إلى كيانات **تفاصيل شروط تعاقد المشروع** و **مهمة المشروع** و **عضو فريق المشروع** و **بند التقدير**.
7. كرر الخطوات 1 - 6 لمجموعة خيارات **ساعات عمل المورد**. 

> ![إضافة موقع عمل المورد إلى بند التقدير.](media/RWL-Default-Value.png)


بالنسبة للتسليم والفوترة، يجب أن يكون العمل المكتمل مسعرًا بشكل دقيق لتحديد ما إذا تم تنفيذه **محليًا** أم **في الموقع**، وما إذا تم استكماله أثناء **ساعات عادية** أو خلا **ساعات إضافية** في القيم الفعلية للمشروع. يجب إضافة حقلي **موقع عمل المورد** و **ساعات عمل المورد** إلى كيانات **إدخال الوقت** و **القيمة الفعلية** و **وتفاصيل بند الفاتورة** و **سطر دفتر اليومية**.

1. في PSA، انقر فوق **الإعدادات** > **الحلول**، ثم انقر نقرًا مزدوجًا فوق **\<your organization name> أبعاد التسعير**.
2. في مستكشف الحلول، في جزء التنقل الأيسر، حدد **الكيانات > إدخال الوقت**.
3. قم بتوسيع الكيان **تفاصيل بند عرض الأسعار**، وحدد **الحقول**.
4. انقر فوق **جديد** لإنشاء حقل جديد يسمي **موقع عمل المورد** وحدد **مجموعة خيارات** كنوع حقل. 
5. حدد **استخدام مجموعة خيارات موجودة**، وحدد مجموعة خيارات **موقع عمل المورد**، ثم انقر فوق **حفظ**.
6. كرر الخطوات 1 - 5 لإضافة هذا الحقل إلى كيانات **القيمة الفعلية** و **تفاصيل بند الفاتورة** و **سطر دفتر اليومية**.
7. كرر الخطوات 1 - 6 لمجموعة خيارات **ساعات عمل المورد**. 

> ![إضافة موقع عمل المورد إلى إدخال الوقت.](media/RWL-time-entry.png)

يؤدي هذا الإجراء إلى إكمال تغييرات المخطط المطلوبة للأبعاد المخصصة المستندة إلى مجموعة خيارات.

## <a name="entity-based-custom-pricing-dimensions"></a>أبعاد التسعير المخصصة المستندة إلى كيان

عندما يكون بعد التسعير المخصص كيانا، ستقوم بإضافة علاقات 1: N بين كيان البُعد وكيانات Project Service الأساسية. وباستخدام مثال العنوان القياسي من القسم السابق، من المعقول توقع أن يتم تعيين عنوان قياسي لكل موظف. ونتيجة لذلك، ستحتاج إلى علاقة 1:N من العنوان القياسي إلى المورد القابل للحجز، أو علاقة N:1 إذا تم إنشاؤه من مورد قابل للحجز إلى العنوان القياسي.

1. في PSA، انقر فوق **الإعدادات** > **الحلول**، ثم انقر نقرًا مزدوجًا فوق **\<your organization name> أبعاد التسعير**. 
2. في مستكشف الحلول، في جزء التنقل الأيسر، حدد **الكيانات > العنوان القياسي**.
3. قم بتوسيع كيان **العنوان القياسي** وحدد  **علاقات 1:N**.
4. انقر فوق **جديد** لإنشاء علاقة 1:N الجديدة التي تسمي **عنوان قياسي إلى مورد قابل للحجز**. أدخل المعلومات المطلوبة، ثم انقر فوق **حفظ**.

> ![إضافة عنوان قياسي كحقل مرجعي إلى مورد قابل للحجز.](media/ST-BR.png)

سيتعين أيضا إضافة العنوان القياسي إلى كيانات تسعير Project Service، **سعر الدور** و **رفع سعر الدور**. يتم إكمال ذلك أيضا باستخدام علاقات1:N بين **العنوان القياسي** وكيانات **سعر الدور** وكيانات **العنوان القياسي** و **رفع سعر الدور**.

1. في مستكشف الحلول، في جزء التنقل الأيسر، حدد **الكيانات > العنوان القياسي**.
2. قم بتوسيع كيان **العنوان القياسي** وحدد  **علاقات 1:N**.
3. انقر فوق **جديد** لإنشاء علاقة 1:N الجديدة التي تسمي **عنوان قياسي إلى سعر الدور**. أدخل المعلومات المطلوبة، ثم انقر فوق **حفظ**.
4. كرر الخطوات 1 - 4 لإنشاء علاقات 1:N بين كياني **العنوان القياسي** و **رفع سعر الدور**،

في مراحل المبيعات والتقدير الخاصة بالمشروع، لتحديد سعر عرض الأسعار/المشروع، تكون التقديرات الخاصة بمجهود العمل مطلوبة لكل عنوان قياسي. وهذا يعني أن علاقات 1:N العلاقات من العنوان القياسي إلى كل واحدة من هذه الكيانات التقديرية في Project Service مطلوبة: 

- **تفاصيل بند عرض الأسعار‬**
- **تفاصيل بنود عقد المشروع**
- **مهمة المشروع**
- **عضو فريق المشروع**
- **سطر التقدير**

5. كرر الخطوات من 1 إلى 5 لإنشاء علاقات 1:N من **العنوان القياسي** إلى **تفاصيل بند عرض الأسعار** و **تفاصيل شروط تعاقد المشروع** و **مهمة المشروع** و **عضو فريق المشروع** و **بند التقدير**.

> ![إضافة عنوان قياسي كحقل مرجعي إلى بند التقدير.](media/ST-Estimate-Line.png)

في مراحل التسليم والفوترة، يجب أن يكون العمل الذي تم إكماله بواسطة كل عنوان قياسي مسعرًا بشكل دقيق حسب القيم الفعلية للمشروع. وهذا يعني أنه يلزم وجود علاقات 1:N من **العنوان القياسي** إلى **إدخال الوقت** و **القيمة الفعلية** و **تفاصيل بند الفاتورة**، و **كيانات سطر دفتر اليومية**

6. كرر الخطوات 1 - 6 لإنشاء علاقات 1:N من **العنوان القياسي** إلى **إدخال الوقت** و **القيمة الفعلية** و **تفاصيل بند الفاتورة**، و **كيانات سطر دفتر اليومية**

> ![إضافة عنوان قياسي كحقل مرجعي إلى إدخال الوقت.](media/ST-Mapping.png)

### <a name="set-up-dimension-value-defaulting-using-the-mappings-features-of-the-platform"></a>إعداد قيمة البُعد الافتراضية باستخدام ميزات المخططات الخاصة بالنظام الأساسي
بالنسبة لإدخال الوقت، سيكون من المفيد أن يكون للنظام افتراضيا عنوان قياسي في إدخال الوقت من المورد القابل للحجز الذي يسجل إدخال الوقت. استخدم الخطوات التالية لإضافة تعيينات حقول في علاقة 1:N من  **المورد القابل للحجز** إلى **إدخال الوقت**.

1. في مستكشف الحلول، في جزء التنقل الأيسر، حدد **الكيانات > العنوان القياسي**.
2. قم بتوسيع كيان **العنوان القياسي** وحدد  **علاقات 1:N**.
3. انقر نقرًا مزدوجًا فوق **المورد القابل الحجز إلى إدخال الوقت**. في صفحة **العلاقة**، انقر فوق **استخدام تعيينات الحقول**. 
4. انقر فوق **جديد** لإنشاء تعيين حقل جديد بين حقل **العنوان القياسي** في كيان **المورد القابل للحجز** إلى الحقل المرجع لـ **العنوان القياسي** في كيان **إدخال الوقت**. 

> ![إعداد تعيينات الحقول للسماح بالتخصيص الافتراضي للعنوان القياسي من مورد قابل للحجز إلى إدخال الوقت.](media/ST-Mapping2.png)


يؤدي هذا الإجراء إلى إكمال تغييرات المخطط المطلوبة للأبعاد المخصصة المستندة إلى كيان.

##  <a name="add-custom-fields-to-forms-views-and-business-rules"></a>إضافة حقول مخصصة إلى النماذج وطرق العرض وقواعد الأعمال

بعد إجراء كافة التغييرات المطلوبة في المخطط، تكون الخطوة التالية هي جعل الحقول مرئية في واجهة المستخدم بإضافة الحقول إلى النماذج وطرق العرض.

1. افتح النموذج أو طريقه العرض. في جزء التنقل الأيمن، حدد الحقل واسحبه إلى لوحة النموذج. 
2. إذا كنت تقوم بتحرير طريقه عرض، فاستخدم جزء التنقل الأيمن، وانقر فوق **إضافة حقول**، ثم في مربع حوار **سرد الحقل**، حدد الحقول التي تريدها وانقر فوق **موافق**.

يوفر الجدول التالي قائمة شاملة بالنماذج وطرق العرض الجاهزة، حسب الكيان، والذي يلزم تحديثه بحقول جديدة. إذا كان لديك أي طرق عرض أو نماذج إضافية في التخصيصات الخاصة بك بهذه الكيانات، فقم بإضافة الحقول الجديدة إلى تلك النماذج أيضا.

| كيان Project Service        | النماذج التي تحتاج إلى حقل جديد   |طرق العرض التي تحتاج إلى حقل جديد      |
| ------------------------------|---------------------------------|----------------------------------|
|  سعر الدور|• المعلومات |• أسعار فئات الموارد النشطة<br> • طريقة العرض المقترنة لأسعار فئات الموارد|
|  رفع سعر الدور|• المعلومات|• رفع سعر الدور النشط<br>• طريقة العرض المقترنة لرفع سعر الدور|
|  تفاصيل بند عرض الأسعار‬|• معلومات المشروع<br>• إنشاء سريع للمشروع|• تفاصيل بند عرض الأسعار‬ النشطة<br>• تفاصيل بند عرض الأسعار المجمعة<br>• طريقة العرض المقترنة لتفاصيل بند عرض الأسعار|
|  تفاصيل شروط تعاقد المشروع|• معلومات المشروع<br>• إنشاء سريع للمشروع|• تفاصيل شروط التعاقد المُجمعة<br>• تفاصيل شروط التعاقد النشطة<br>• طريقة العرض المقترنة بتفاصيل شروط التعاقد|
|  مهمة المشروع|• المعلومات<br>• نموذج جديد||
|  عضو فريق المشروع|• المعلومات<br>• نموذج جديد|• أعضاء فريق المشروع النشيطون<br>• أعضاء فريق المشروع<br>• طريقة العرض المقترنة لأعضاء فريق المشروع|
|  إدخال الوقت|• المعلومات<br>• إنشاء إدخال وقت|• إدخالات الوقت الخاصة بي حسب التاريخ<br>• إدخالات الوقت الخاصة بي لهذا الأسبوع<br>• إدخالات الوقت للموافقة|
|  سطر دفتر اليومية|• المعلومات<br>• إنشاء سريع|• سطور دفتر اليومية النشطة<br>• طريقة العرض المقترنة لسطر دفتر اليومية|
|  تفاصيل بند الفاتورة|• المعلومات<br>• إنشاء سريع|• تفاصيل بند الفاتورة النشطة<br>• عمليات فواتير يتحمل نفقتها العميل<br>• عمليات فواتير تكميلية<br>• طريقة العرض المقترنة لتفاصيل بند الفاتورة<br>• عمليات فاتورة لا يتحمل نفقتها العميل|
|  فعلي|• المعلومات<br>• القيم الفعلية النشطة|• طريقة العرض المقترنة للقيم الفعلية|

قد تحتاج أيضا إلى إضافة الحقول المخصصة في قواعد العمل وفقا لما قمت بتحديده. وأحد الامثلة الجاهزة لقاعدة العمل **إمكانية تحرير إدخال الوقت استنادًا إلى الحالة‬**. تحدد هذه القاعدة الحقول التي يلزم تأمينها عندما يكون إدخال الوقت في حالة غير قابلة للتحرير مثل **تمت الموافقة**. أضف الحقول إلى قاعدة العمل هذه حتى تكون الحقول مؤمنة من التحرير عندما يكون إدخال الوقت بحالة خلاف **مسودة** أو **مرتجع**.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
